ManSC={sound:null,playlist:null,queue:null,running:null,elements:null,timer:null,init:function(_elem){this.elements=_elem,SC.initialize({client_id:"b2c09660b859d9f40dc3eb3106c74cd3"})},getPlaylist:function(_playlistId){var promise=$.Deferred();return SC.get("/playlists/"+_playlistId,function(data){ManSC.playlist=data;var html="";$.each(ManSC.playlist.tracks,function(index,val){html+="<li rel='"+val.id+"'><span></span><span><div>"+val.title+"</div></span></li>"}),ManSC.elements.playlist.html(html),ManSC.queue=ManSC.playlist.tracks,promise.resolve(data)}),promise},insertInList:function(_tracks){ManSC.playlist.tracks=_tracks;var html="";$.each(ManSC.playlist.tracks,function(index,val){html+="<li rel='"+val.id+"'><span></span><span><div>"+val.title+"</div></span></li>"}),ManSC.elements.playlist.html(html),ManSC.queue=ManSC.playlist.tracks},prev:function(){this.running>0&&(this.running--,this.play(this.queue[this.running].id))},next:function(){this.running<this.queue.length-1&&(this.running++,this.play(this.queue[this.running].id))},play:function(_id){if(_id)null!==this.sound&&(this.sound.stop(),this.sound.unload()),SC.stream(_id,{autoPlay:!0,volume:this.getVolume(),onfinish:function(){ManSC.next()}},function(data){var elmts=ManSC.elements,index="",track=ManSC.playlist.tracks.filter(function(el,i){return el.id==_id?(index=i,el):void 0})[0];ManSC.running=index,elmts.coverShadow.attr("src",(track.artwork_url||"images/empty-vinil.png").replace("large","t200x200")),elmts.cover.attr("src",(track.artwork_url||"images/empty-vinil.png").replace("large","t200x200")),elmts.name.attr("title",track.title),elmts.name.html(track.title),elmts.artist.attr("title",track.user.username),elmts.artist.html(track.user.username),ManSC.sound=data,this.timer||(this.timer=setInterval(function(){ManSC.updateTime()},500))});else if(this.sound)return void(!this.sound.playState||this.sound.paused?this.sound.play():this.sound.playState&&this.sound.pause())},getVolume:function(){return parseInt(this.elements.volume.css("left"))},setVolume:function(vol){this.sound&&this.sound.setVolume(vol)},getTime:function(){return this.sound.position},setTime:function(seconds){seconds||(seconds=this.getTime()),sec=Math.floor(seconds/1e3%60),min=Math.floor(seconds/6e4%60),pos=100*seconds/this.sound.durationEstimate,this.sound.setPosition(seconds)},updateTime:function(){function formatTwoNumbers(_num){return 1==_num.toString().length?"0"+_num:_num}var currentTime=this.getTime(),currentSec=Math.floor(currentTime/1e3%60),currentMin=Math.floor(currentTime/6e4%60),currentHrs=Math.floor(currentTime/36e5%60),currentPos=100*currentTime/this.sound.durationEstimate,totalTime=this.sound.durationEstimate,totalSec=Math.floor(totalTime/1e3%60),totalMin=Math.floor(totalTime/6e4%60),totalHrs=Math.floor(totalTime/36e5%60);this.elements.timeBar.slider({value:currentPos});var currentTimeFormated=(currentHrs?currentHrs+":":"")+(currentHrs?formatTwoNumbers(currentMin):currentMin)+":"+formatTwoNumbers(currentSec),totalTimeFormated=(totalHrs?totalHrs+":":"")+(totalHrs?formatTwoNumbers(totalMin):totalMin)+":"+formatTwoNumbers(totalSec);this.elements.timeCurrent.text(currentTimeFormated),this.elements.timeTotal.text(totalTimeFormated)}},User=function(_id){function user(){_id&&(id=_id)}var id,info,likes,playlists;return user.prototype.getInfo=function(){var promise=$.Deferred();return SC.get("/users/"+id,function(data){info=data,promise.resolve(data)}),promise},user.prototype.getPlaylists=function(){var promise=$.Deferred();return SC.get("/users/"+id+"/playlists",function(data){playlists=data,promise.resolve(data)}),promise},user.prototype.getLikes=function(_limit){var promise=$.Deferred(),limit=_limit?_limit:50,next_href=!1;return SC.get("/users/"+id+"/favorites",{limit:limit,linked_partitioning:1},function(data){next_href=data.next_href?data.next_href:!1,likes=data.collection,promise.resolve(data.collection)}),promise},new user};
//# sourceMappingURL=ManSC.min.map