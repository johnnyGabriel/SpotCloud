var ManSC=function(clientID,opts){function manSC(){clientID&&(client_ID=clientID,SC.initialize({client_id:client_ID})),opts&&(elements=opts),publicFunctions=this}function formatTrackCount(_num){for(var numero_formatado=_num,escalas=["","K","M","G"],index=0,temp=0;(temp=parseInt(numero_formatado/1e3))>0;)numero_formatado=temp,index++;return numero_formatado+escalas[index]}function getVolume(){return elements.volume.slider("option","value")}function writeTrackInfoOnScreen(){elements.name.text(currentTrack.title).attr("title",currentTrack.title),elements.artist.text(currentTrack.user.username).attr("title",currentTrack.user.username),elements.cover.attr("src",(currentTrack.artwork_url||"images/empty-vinil.png").replace("large",coverSize)),elements.coverShadow.attr("src",(currentTrack.artwork_url||"images/empty-vinil.png").replace("large",coverSize))}function trackTimer(){var currentTime,currentPos;return setInterval(function(){currentTime=soundMan.position,currentPos=100*currentTime/soundMan.durationEstimate,elements.timeBar.slider({value:currentPos}),elements.timeCurrent.text(formatTime(currentTime))},500)}function twoDecimals(_number){return 10>_number?"0"+_number:_number}function formatTime(_time){var sec,min,hrs;return sec=Math.floor(_time/1e3%60),min=Math.floor(_time/6e4%60),hrs=Math.floor(_time/36e5%60),(hrs?hrs+":"+twoDecimals(min):min)+":"+twoDecimals(sec)}function isEmpty(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}function calcTrackEstimatedDuration(){function calcDuration(){elements.duration.text(formatTime(soundMan.durationEstimate))}return setInterval(function(){calcDuration()},1e3)}var client_ID=null,elements={},soundMan=null,startMuted=!1,currentTrack=null,currentPlaylist=null,viewedPlaylist=null,timers={},coverSize="t200x200",publicFunctions=null;return manSC.prototype.play=function(_id){var promise=$.Deferred();isEmpty(viewedPlaylist)||viewedPlaylist.title!==(currentPlaylist?currentPlaylist.title:"")&&(currentPlaylist=viewedPlaylist,viewedPlaylist={}),soundMan&&(soundMan.stop(),soundMan.unload()),SC.stream(_id,{autoPlay:!0,volume:getVolume(),onfinish:function(){publicFunctions.next(),promise.resolve()},ondataerror:function(){console.log("error")}},function(data){var index="";if(soundMan=data,startMuted&&soundMan.mute(),currentTrack){var oldElement=$("[rel='"+currentTrack.id+"']");oldElement.removeClass("selected"),oldElement.children("span").first().removeClass("pause").removeClass("play-paused")}var newElement=$("[rel='"+_id+"']");newElement.addClass("selected"),newElement.children("span").first().addClass("pause"),currentTrack=currentPlaylist.tracks.filter(function(el,i){return el.id===_id?(index=i,el):void 0})[0],currentPlaylist.index=index,writeTrackInfoOnScreen(),timers.trackTime=trackTimer(),timers.trackDuration=calcTrackEstimatedDuration()})},manSC.prototype.playToggle=function(){return soundMan?soundMan.paused?soundMan.resume():soundMan.pause():void 0},manSC.prototype.mute=function(_callback){soundMan?soundMan.muted?(soundMan.unmute(),startMuted=!1):(soundMan.mute(),startMuted=!0):startMuted=!startMuted,_callback&&_callback(startMuted)},manSC.prototype.previous=function(){currentPlaylist.index>0&&this.play(currentPlaylist.tracks[--currentPlaylist.index].id)},manSC.prototype.next=function(){currentPlaylist.index<currentPlaylist.tracks.length-1&&this.play(currentPlaylist.tracks[++currentPlaylist.index].id)},manSC.prototype.setPosition=function(seconds){soundMan&&soundMan.setPosition(seconds)},manSC.prototype.showInPlaylistPanel=function(title,data){var html="<li class='container-tracks__columns-title'><span></span><span>Name</span><span>Artist</span><span>Duration</span><span>Views</span></li>";$.each(data,function(index,val){html+="<li rel='"+val.id+"'><span class='checked'></span><span title=\""+val.title+'">'+val.title+'</span><span title="'+val.user.username+'">'+val.user.username+"</span><span>"+formatTime(val.duration)+"</span><span title='"+formatTrackCount(val.playback_count)+" views'>|||||||</span></li>"}),elements.playlist.html(html),viewedPlaylist={},viewedPlaylist.title=title,viewedPlaylist.tracks=data},manSC.prototype.setVolume=function(vol){soundMan&&soundMan.setVolume(vol)},manSC.prototype.getDuration=function(){return soundMan?soundMan.durationEstimate:void 0},new manSC};
//# sourceMappingURL=ManSC.min.map